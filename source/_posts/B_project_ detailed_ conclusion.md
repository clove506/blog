---
title: 【优护助手-合肥】合肥项目-B端Farmer详细整理
date: 2017-3-6 14:55:00
categories: 合肥
tags:
- 优护助手
---
## 摘要
合肥项目-护士端(B端)-Farmer详细整理
<!--more-->

## 前言
   到今天为止，B端(护士端)一期项目结束已经近两个月了，一直在忙，没有时间对项目做回顾和详细的总结，为了后期项目的开发顺利些，我利用上周一周时间对B端项目做了以下的整理。可能有一些细节的问题我没有注意到，我会一直跟进。由于二期项目还在开发当中，事后我还是会做详细的整理。
   
## 合肥项目B端（护士端）交互：
[一期交互图](http://owncloud.youhujia.com/index.php/apps/files/?dir=/Public%40Youhujia/%E3%80%90UI%E8%AE%BE%E8%AE%A1%E3%80%91/1-1%E5%90%88%E8%82%A5%E9%A1%B9%E7%9B%AE/%E5%90%88%E8%82%A5%E9%A1%B9%E7%9B%AEB%E7%AB%AF/1-1%E6%BA%90%E6%96%87%E4%BB%B6&fileid=141092)
[二期交互图](http://wiki.office.test.youhujia.com/2017/02/14/nursing_indoors_second/)

	也可以在本地查看，
	 一期地址：Public@Youhujia/【UI设计】/1-1合肥项目/合肥项目B端/1-1源文件
     二期地址：Public@Youhujia/【UI设计】/1-1合肥项目/合肥项目B端/合肥-护士，客服创建订单/源文件
     
## 项目流程：
### 设计
#### 一期
- [B端API](http://wiki.office.test.youhujia.com/2017/02/24/HeFei_Project-B-End-API/)
- [详细规划](http://wiki.office.test.youhujia.com/2016/12/14/HeFei-Project-B-End-Leitu//)
- 类图展示：

    ![](/media/Farmer一期类图.png)
    
#### 二期

- [B端API](http://wiki.office.test.youhujia.com/2017/02/28/hefei_help_B_API/)
- [详细设计(暂无)]()
- [类图(暂无)]()

### B端一期结构图

![](/media/B端一期结构图.png)

### 开发

    1.根据编写好的类图搭建项目的框架
    2.根据设计好的API写proto文件
    3.根据定好的API，先写Controller代码，Controller中包含所有定好的接口API，参数，以及返回值，
    4.根据每个页面的需求不同，返回的值也将不同
    
   - 分析首页接口和待接单接口（时序图展示）
 		
      ![](/media/B端一期-首页和待接单.png)
     	
     注：首页接口显示该护士允许服务并且愿意服务的新订单的个数（后端返回的是新订单的List），前提是有权限能够看到首页页面。
      
   - 分析已接单列表流程（时序图展示）
  
     ![](/media/B端一期-已接单.png)
     
   - 分析订单详情页面（时序图展示）
   
     ![](/media/B端一期-订单详情.png)
     
   - 服务设置管理页面&可服务接口（时序图展示）
  
     ![](/media/B端一期-服务设置管理&可服务.png)
     
   - 各种按钮接口（时序图展示）
   
     ![](/media/B端一期-按钮.png)
     
### 页面显示对应状态机的状态

页面状态  |  状态机里的状态
---------|-------------
待接单    |  待接单、高优先接单、派单待确认
已取消    |   待退款、退款中、退款成功、退款异常、发起退款异常
待服务    |   待服务
服务中    |   服务中、服务异常、服务超时
服务中-用户申请退款  |  退款申请中
服务中-用户已申请客服介入  |  服务纠纷
服务中-您已申请客服介入  |   服务纠纷
已完成     |   服务完成状态（待评价）、结算状态、订单结束、订单结束后纠纷、订单关闭状态

### 按钮上的字

Enum  |  name
------|--------
APPLY_OPERATING_INTERVENTION  |  申请客服介入
CANCEL_ORDER  |  取消订单
COMPLETED   |   此操作已完成
COMPLETE_ORDER  |  完成订单
REFUND   |  同意退款
ACCEPT_ORDER  |  接单
AGREED_REFUND  |    同意退款
UNCOMPLETED  |  完成此操作
			
### 测试环节

	1.使用postMan进行接口请求联通自测，确定请求能正常运行，能从数据库拿到前端需要的值
	2.确定在gateWay中，确定请求能正常运行
	3.跟前端进行联调，确定前端需要的数据能真正的返回，检查过程中，查看代码中的逻辑是否存在问题，技术更正
	4.上线前大规模测试
	5.上线
	
## 测试bug

    1.B C端服务步骤不一致
    2.服务信息不一致，请看图中服务名称
    3.B C端服务时间不一致
    4.提醒开关无效，报错
    5.已进行自测，未显示已自测
    6.后端传的bannerURL前端不能够显示
    7.订单列表原有数据消失，错误显示没有此服务
    8.在已接单中某个订单显示有已评价，在服务设置管理界面没有出现该评价内容
    9.需要全局梳理，增加对权限的校验

        
## 项目进度

title |  开始时间  |  天数
-------|--------|--------
框架项目搭建完成，等待下层数据 | 2016-12-16 | 3d
首页接口  | 2016-12-20 | 3d
查询订单详情  |  2016-12-22  |3d
查询已接单的订单集合  |  2016-12-23  |  3d
查询服务设置的信息  |  2016-12-27  |  1d
update接口  |  	2016-12-27  | 1d
项目合并  |  2016-12-28  |  1d
B端代码不完善，有错误，修改中  |  2016-12-29  |  2d
错误已修改完，action数据不全，进程暂停  |  2017-1-3  |  1d
测试query  |  2017-1-4  | 0.5d
测试update  |  2017-1-4  | 0.5d
前后端联调  |   2017-1-5  |  4d
测试人员测试  |     |  2d
上线   |   |  1d
	
[项目进度](http://wiki.office.test.youhujia.com/2017/01/08/B-duan-jindu/)





