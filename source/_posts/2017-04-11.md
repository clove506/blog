---
title: 宣教、自测、评估数据灌入
date: 2017-4-11 16:00:00
categories: 优护数据
tags:
- 宣教
- 自测
- 评估
---

## 摘要

宣教、自测、评估数据灌入方案。
<!--more-->


MagicEra数据产出

背景就不详述了，这里列出需要的内容如下：

宣教和百科节点的挂载。
量表和百科节点的挂载。
评估及自测同量表的生成关系。
评估及自测同虚拟机构及科室的关系。
前台疾病分类同百科节点的挂载。
虚拟机构及科室同前台疾病分类的关系。
宣教和百科节点的挂载

编辑器预期会在0425左右上线，上线后编辑器只承载编辑功能。

建议Notepad++文本编辑器编辑。

文件要求：

文件名即最终显示给用户使用的文件名。请谨慎命名。
文件内容：带HTML格式的文章内容。
各个文件名不允许重复。
文件可以放在多个目录下面。目录名不做要求，方便管理用，建议使用面向C端用户的疾病分类管理。
文件需要UTF-8编码。
文件的换行符是\n，而不是Windows换行风格\r\n
汇总文件要求：

格式CSV。
文件需要UTF-8编码。
格式如下：

文件名	所属百科节点全路径	文件所在目录全路径
脑卒疾病宣教	内容-健康信息-医学诊断-精神和行为障碍	凡伟的个人目录-基本宣教
解释：

文件名要和文件夹夹下的文件同名。
百科节点的全路径是从根节点开始的全部路径。
文件所在的全路径是文件从交付的目录开始的全路径。
量表和百科节点的挂载

使用JSON编辑器：链接 或者 链接 或者是用Sublime或者NotePad++

目前支持的题型：

单选
多选
单选矩阵
填空（单选或者多选）
不会支持的提醒：

排序题。调研后发现并无应用场景
文件要求：

文件名即最终显示给用户使用的文件名。请谨慎命名。如果一个节点下有多个名字，可以使用后缀1、2、3来区别。
各个文件名不允许重复。
文件可以放在多个目录下面。目录名不做要求，方便管理用，建议使用面向C端用户的疾病分类管理。
文件需要UTF-8编码。
文件的换行符是\n，而不是Windows换行风格\r\n
文件格式要求：

```json
{
    "name": "心脏病风险评估量表1",
    "relatedWikiNodeFullPath": "内容-健康信息-医学诊断-精神和行为障碍",
    "desc": "对心脏病风险评估的一组题目，主要是询问了用户的运动和抽烟严重程度。",
    "conclusionChoiceLogic": [
        {
            "scope": [
                1,
                2
            ],
            "weightSumAlgo": [
                {
                    "floor": 0,
                    "ceiling": 0,
                    "conclusion": "无患病风险"
                },
                {
                    "floor": 1,
                    "ceiling": 2,
                    "conclusion": "患病风险中"
                }
            ]
        }
    ],
    "choiceWikiMappingLogic": [
        {
            "scope": [
                1,
                2
            ],
            "weightSumAlgo": [
                {
                    "floor": 0,
                    "ceiling": 0
                },
                {
                    "floor": 1,
                    "ceiling": 2,
                    "mappingWikiPath": "内容-健康信息-医学诊断-精神和行为障碍-高血压"
                }
            ]
        }
    ],
    "completionMappingLogic": [
        {
            "scopeId": 5,
            "mappingWikiPath": [
                "内容-健康信息-医学诊断-精神和行为障碍-高血压",
                "内容-健康信息-医学诊断-精神和行为障碍-高血压",
                ""
            ]
        }
    ],
    "question": {
        "singleChoiceList": [
            {
                "order": 1,
                "type ": "single_choice",
                "question": "您平时一个星期抽几包烟？",
                "answer": [
                    {
                        "order": 1,
                        "content": "一包",
                        "weight": 1
                    },
                    {
                        "order": 2,
                        "content": "两包",
                        "weight": 2
                    },
                    {
                        "order": 3,
                        "content": "三包",
                        "weight": 3
                    },
                    {
                        "order": 4,
                        "content": "四包及以上",
                        "weight": 4
                    }
                ]
            },
            {
                "order": 2,
                "type ": "single_choice",
                "question": "您平时一个星期锻炼几次",
                "answer": [
                    {
                        "order": 1,
                        "content": "一次",
                        "weight": 1
                    },
                    {
                        "order": 2,
                        "content": "两次",
                        "weight": 2
                    },
                    {
                        "order": 3,
                        "content": "三次",
                        "weight": 3
                    },
                    {
                        "order": 4,
                        "content": "四次及以上",
                        "weight": 4
                    }
                ]
            }
        ],
        "multiChoiceList": [
            {
                "order": 3,
                "type ": "multi_choice",
                "question": "您喜欢吃如下哪些水果？",
                "answer": [
                    {
                        "order": 1,
                        "content": "苹果",
                        "weight": 1
                    },
                    {
                        "order": 2,
                        "content": "香蕉",
                        "weight": 1
                    },
                    {
                        "order": 3,
                        "content": "橘子",
                        "weight": 1
                    },
                    {
                        "order": 4,
                        "content": "石榴",
                        "weight": 1
                    }
                ]
            }
        ],
        "singleChoiceMatrixList": [
            {
                "order": 4,
                "type": "single_choice_matrix",
                "question": "ADL评估",
                "choice": [
                    "自理",
                    "稍依赖他人",
                    "较大依赖他人",
                    "完全依赖他人"
                ],
                "questionList": [
                    {
                        "order": 1,
                        "question": "进食",
                        "answerWeight": [
                            1,
                            1,
                            1,
                            1
                        ]
                    },
                    {
                        "order": 2,
                        "question": "洗澡",
                        "answerWeight": [
                            1,
                            1,
                            1,
                            1
                        ]
                    },
                    {
                        "order": 3,
                        "question": "洗脸，刮胡子",
                        "answerWeight": [
                            1,
                            1,
                            1,
                            1
                        ]
                    }
                ]
            }
        ],
        "completionList": [
            {
                "order": 5,
                "type": "completion",
                "question": "基本指标",
                "format": "血压:${BLANK} mmHg；血糖:${BLANK} mmol/L;您的意见:${BLANK}"
            }
        ]
    }
}

格式说明如下：

{
  "name": "心脏病风险评估量表1", #量表的名称
  "relatedWikiNodeFullPath": "内容-健康信息-医学诊断-精神和行为障碍", #关联的百科节点全路径
  "desc": "对心脏病风险评估的一组题目，主要是询问了用户的运动和抽烟严重程度。", #描述，汇总评估内容
  "conclusionChoiceLogic": [ #量表评估结论，这里只针对选择题（单选，多段，单选矩阵），该结显示给评估人，用于展示评估和自测结果。
    {
      "scope": [# 范围，题目的范围
        1,
        2
      ],
      "weightSumAlgo": [# 记分总结逻辑
        {
          "floor": 0,# 最低分（包含）
          "ceiling": 0,#最高分（包含）
          "conclusion": "无患病风险" #结论
        },
        {
          "floor": 1,
          "ceiling": 2,
          "conclusion": "患病风险中"
        }
      ]
    }
  ],
  "choiceWikiMappingLogic": [#选择题百科节点映射关系
    {
      "scope": [# 范围
        1,
        2
      ],
      "weightSumAlgo": [# 记分总结逻辑
        {
          "floor": 0,# 最低分（包含）
          "ceiling": 0, # 最高分（包含）
          
        },
        {
          "floor": 1,
          "ceiling": 2,
          "mappingWikiPath": "内容-健康信息-医学诊断-精神和行为障碍-高血压", # 关联关系（如果没有，可以缺失该项）
          
        }
      ]
    }
  ],
  "completionMappingLogic": [# 填空题百科节点映射关系
    {
     "scopeId":5, # 题目Id
     "mappingWikiPath":["内容-健康信息-医学诊断-精神和行为障碍-高血压","内容-健康信息-医学诊断-精神和行为障碍-高血压",""] # 关联节点，和题目中的空格一一对应，如果空格无对应内容，空字符串即可。
   }
  ],
  "question": { # 题目详情
    "singleChoiceList": [ # 单选
      {
        "order": 1, # 题目Id
        "type ": "single_choice", # 题型
        "question": "您平时一个星期抽几包烟？", # 题目问题
        "answer": [ # 答案
          {
            "order": 1, # 答案顺序
            "content": "一包", # 内容
            "weight": 1 # 权重
          },
          {
            "order": 2, 
            "content": "两包",
            "weight": 2
          },
          {
            "order": 3,
            "content": "三包",
            "weight": 3
          },
          {
            "order": 4,
            "content": "四包及以上",
            "weight": 4
          }
        ]
      },
      {
        "order": 2, 
        "type ": "single_choice",
        "question": "您平时一个星期锻炼几次",
        "answer": [
          {
            "order": 1,
            "content": "一次",
            "weight": 1
          },
          {
            "order": 2,
            "content": "两次",
            "weight": 2
          },
          {
            "order": 3,
            "content": "三次",
            "weight": 3
          },
          {
            "order": 4,
            "content": "四次及以上",
            "weight": 4
          }
        ]
      }
    ],
    "multiChoiceList": [ # 多选题
      {
        "order": 3, # 题目Id
        "type ": "multi_choice", # 类型
        "question": "您喜欢吃如下哪些水果？", # 问题
        "answer": [ # 答案
          {
            "order": 1,
            "content": "苹果", 
            "weight": 1 # 权重    
          },
          {
            "order": 2,
            "content": "香蕉",
            "weight": 1
          },
          {
            "order": 3,
            "content": "橘子",
            "weight": 1
          },
          {
            "order": 4,
            "content": "石榴",
            "weight": 1
          }
        ]
      }
    ],
    "singleChoiceMatrixList": [ # 单选矩阵
      {
        "order": 4,
        "type": "single_choice_matrix", #类型
        "question":"ADL评估", # 题目
        "choice":[ # 矩阵选项
          "自理",
          "稍依赖他人",
          "较大依赖他人",
          "完全依赖他人"         
        ],
        "questionList":[ # 问题列表
          {
            "order":1,
            "question":"进食", # 具体问题
            "answerWeight":[1,1,1,1] # 选项对应权重
          },
          {
            "order":2,
            "question":"洗澡",
            "answerWeight":[1,1,1,1]
          },
          {
            "order":3,
            "question":"洗脸，刮胡子",
            "answerWeight":[1,1,1,1]
          }
        ]
      }
    ],
    "completionList":[ # 填空题
      {
        "order": 5,
        "type": "completion",  # 类型
        "question":"基本指标", # 问题 不可缺失
        "format":"血压:${BLANK} mmHg；血糖:${BLANK} mmol/L;您的意见:${BLANK}"
      }
    ]
  }
}
```
注意：

题目的Id不可以重复。
填空题的题目不允许缺失
汇总文件要求：

格式CSV。
文件需要UTF-8编码。
格式如下：

文件名	所属百科节点全路径	文件所在目录全路径
脑卒疾病量表1	内容-健康信息-医学诊断-精神和行为障碍	凡伟的个人目录-基本宣教
解释：

文件名要和文件夹夹下的文件同名。
百科节点的全路径是从根节点开始的全部路径。
文件所在的全路径是文件从交付的目录开始的全路径。
评估及自测同量表的生成关系

文件要求：

文件名即最终显示给用户使用的文件名。请谨慎命名。如果一个节点下有多个名字，可以使用后缀1、2、3来区别。
各个文件名不允许重复。
文件可以放在多个目录下面。目录名不做要求，方便管理用，建议使用面向C端用户的疾病分类管理。
文件需要UTF-8编码。
文件的换行符是\n，而不是Windows换行风格\r\n
文件内容如下：
```json
{
  "name": "凡伟的第一张评估表",
  "desc": "凡伟创建的第一张评估量表，关联了脑卒中评估，用户基本信息等两个基本量表",
  "content": {
    "scaleList": [
      {
        "scaleName": "用户基本信息",
        "order": 1
      },
      {
        "scaleName": "脑卒量表1",
        "order": 2
      },
      {
        "scaleName": "脑卒量表2",
        "order": 3
      }
    ]
  }
}
```
文件说明如下：
```json
{
  "name": "凡伟的第一张评估表", # 名称 全局唯一
  "desc": "凡伟创建的第一张评估量表，关联了脑卒中评估，用户基本信息等两个基本量表", # 描述 显示给使用用户
  "content": {# 内容
    "scaleList": [ # 具体关联量表
      {
        "scaleName": "用户基本信息", # 量表名称
        "order": 1 # 序号
      },
      {
        "scaleName": "脑卒量表1",
        "order": 2
      },
      {
        "scaleName": "脑卒量表2",
        "order": 3
      }
    ]
  }
}
```
注意：

名称全局唯一
评估及自测同虚拟机构及科室的关系

文件要求：

文件名即最终显示给用户使用的文件名。请谨慎命名。如果一个节点下有多个名字，可以使用后缀1、2、3来区别。
各个文件名不允许重复。
文件可以放在多个目录下面。目录名不做要求，方便管理用，建议使用面向C端用户的疾病分类管理。
文件需要UTF-8编码。
文件的换行符是\n，而不是Windows换行风格\r\n
文件内容如下：
```json
{
  "mappingList": [
    {
      "departmentTypeDetailName": "神经内科",
      "nurseEvaluateNameList": [
        "凡伟创建的第一个评估",
        "凡伟创建的第二个评估"
      ],
      "patientEvaluteNameList": [
        "凡伟创建的第一个评估",
        "凡伟创建的第一个评估"
      ]
    }
  ]
}
```
文件格式如下：
```json
{
  "mappingList": [ #  映射关系
    {
      "departmentTypeDetailName": "神经内科", # 科室详情
      "nurseEvaluateNameList": [ # 评估
        "凡伟创建的第一个评估",
        "凡伟创建的第二个评估"
      ],
      "patientEvaluteNameList": [ # 自测
        "凡伟创建的第一个评估",
        "凡伟创建的第一个评估"
      ]
    }
  ]
}
```
前台疾病分类同百科节点的挂载

文件要求：

文件名即最终显示给用户使用的文件名。请谨慎命名。如果一个节点下有多个名字，可以使用后缀1、2、3来区别。
各个文件名不允许重复。
文件可以放在多个目录下面。目录名不做要求，方便管理用，建议使用面向C端用户的疾病分类管理。
文件需要UTF-8编码。
文件的换行符是\n，而不是Windows换行风格\r\n
文件内容如下：
```json
{
    "diseaseNodes":[
        {
            "name":"粘液瘤",
            "level":1,
            "fullPath":"粘液瘤"
        },
        {
            "name":"粘液瘤-腹膜假性粘液瘤",
            "level":2,
            "fullPath":"腹膜假性粘液瘤"
            "relatedWikiNodePath":[
                "内容-健康信息-医学诊断-精神和行为障碍-高血压",
                "内容-健康信息-医学诊断-精神和行为障碍-高血压",
                "内容-健康信息-医学诊断-精神和行为障碍-高血压"
            ]
        }
    ]
}
```
文件格式如下：
```json
{
    "diseaseNodes":[ # 疾病节点
        {
            "name":"粘液瘤", # 名称
            "level":1, # 层级
            "fullPath":"粘液瘤" # 全路径
        },
        {
            "name":"粘液瘤-腹膜假性粘液瘤",
            "level":2,
            "fullPath":"腹膜假性粘液瘤"
            "relatedWikiNodePath":[ # 百科关联节点 如果没有可以空
                "内容-健康信息-医学诊断-精神和行为障碍-高血压",
                "内容-健康信息-医学诊断-精神和行为障碍-高血压",
                "内容-健康信息-医学诊断-精神和行为障碍-高血压"
            ]
        }
    ]
}
```
虚拟机构及科室同虚拟疾病分类的关系

文件要求：

文件名即最终显示给用户使用的文件名。请谨慎命名。如果一个节点下有多个名字，可以使用后缀1、2、3来区别。
各个文件名不允许重复。
文件可以放在多个目录下面。目录名不做要求，方便管理用，建议使用面向C端用户的疾病分类管理。
文件需要UTF-8编码。
文件的换行符是\n，而不是Windows换行风格\r\n
文件内容如下：

```json
{
  "mappingList": [
    {
      "departmentTypeDetailName": "神经内科",
      "virtualDiseaseNameList": [
        "鼻出血",
        "鼻息肉",
        "鼻中隔偏曲",
        "玻璃体积血",
        "急性感染性会厌炎",
        "急性喉炎",
        "结膜炎"
      ]
    }
  ]
}
```
文件格式如下：

```json
{
  "mappingList": [ # 映射关系
    {
      "departmentTypeDetailName": "神经内科", # 科室
      "virtualDiseaseNameList": [ 
        "鼻出血", 
        "鼻息肉",
        "鼻中隔偏曲",
        "玻璃体积血",
        "急性感染性会厌炎",
        "急性喉炎",
        "结膜炎"
      ]
    }
  ]
}
```




