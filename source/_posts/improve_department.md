---
title: 科室完善 方案草稿
date: 2017-3-13 15:55:00
categories: 优护助手
tags:
- 万家科室
- 优护助手
- 优护后台
---

# 摘要

完善科室 的方案草稿

<!-- more -->


# 背景

为了完成万家科室项目，需获取全国医院及科室的相关信息（北京、合肥等城市优先）

# 方案

当前我们数据库中医院和科室的模型是：

  **yolar中：**
organization:
id name status(审核状态) address lat lon ca ua

department:
...     organization_id ...  

**kangfubao中：**
hospital:
id name address lat lon ca 

department:
...     hospital_id ...

## 完善科室信息，步骤如下：

### 获取科室信息
通过爬虫爬数据并整理入库，具体包含数据为：
· 医院名称（必须）
· 医院等级（必须）
· 科室名称（必须）
· 医院地址（可选）

其中，医院地址的获取方案有以下几种：
· 直接爬到三级行政区域（最佳）
· 爬到医院的经纬度（通过百度地图API转化为三级行政区域）
· 没有爬到医院的位置信息（通过高德地图API搜索医院名称获得经纬度）

### 医院、科室信息入库（默认是未审核状态）
如何存储科室信息以及位置信息？
· 科室：审核状态自行保存，位置信息依赖于医院即可

· 医院：
1. 审核状态自行保存
2. 医院等级自行保存
3. 医院行政区域信息保存方法：
        其一：利用原有经纬度信息，每次查询调用API获取其行政区域信息（不好）
        其二：在医院中新增三级行政区域（一个json或者三个字段）--> 检索时后端压力较小，前端比较复杂
        其三：医院中保存第三级行政区域 + 新建一张保存行政区域信息的表 --> 节省存储空间，但是查询时需多次请求
        
·  存在问题：新旧医院及科室的数据迁移 or 完全落地在新的表结构中

### 数据的增删改查 + 审核操作
在数据模型落实到数据库中，这些操作都是so easy

### 最终的数据结构形式
hospital:
... 医院名称 位置信息 医院等级 审核信息 ...
department:
... 科室名称 所属医院 审核信息 ...
  



# 时间估算

待review后敲定

# Todo

1. 爬到的数据有效性以及其格式问题，可能会有额外的转化的工作量
2. 解决方案中的问题
3. 多名字医院的解决方案--比如解放军第一附属医院又名三〇四医院
4. 需要运营协调把医院名称和科室名称都写成正式名称
5. 高德地图企业开发者账号
是不是有
6. httpConnectionUtil？
7. 医院的图片是什么
8. 医院分级大概都有什么信息 一级甲等这种字段是让他们可以手动输入还是说我们分两级的select框来进行选择


# 参考

http://wiki.office.test.youhujia.com/2017/03/06/Our_Perfect_Departments/



