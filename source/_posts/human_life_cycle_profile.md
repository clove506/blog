---
title: 优护家 自然人档案 系统
date: 2017-01-09 13:00
categories: 系统架构
tags:
- 自然人档案
- 评估
- 数据
---

## 摘要

优护家 自然人档案 系统

<!--more-->

## Wiki维护人

黄丹
陈晨

## 愿景

* 基于维护 自然人生命周期 档案，通过 优护家 服务或知识，使 自然人生命 质量得到提高

## 基本概念

* 自然人生命周期维护，在系统层面，我们可以认为是一个 数据产生->触发动作->再产生数据 的 反馈循环  
* 自然人可以简单理解为snapshot的集合
* 自然人并不只是患者
* 所有系统都围绕 自然人+时间轴 来进行

## 初步构想

  - snapshot: 最基本存储单位
  - view: 基于个体的视图，由若干snapshot组成，比如血常规健康视图，包含血常规类目下snapshots
  - report: 报表，一般来说，由若干view组成，比如精神状况档案，全画像档案
  - 数据搜集层面只要集中注意力加入各种snapshot即可
  - view层面集中处理画像逻辑，比如某人某段时间的基本健康画像（比如最近5个月，血常规）
  - report用来最终输出业务需求，比如（某地区，某年龄层，某个时间段，血常规情况）
  - action: 任何可以产生snapshot的动作或行为，都可以抽象作action
  - trigger: 三元组 view, states, action，表明view在什么状态可以触发什么action

## 概念定义

### snapshot
  - 定义：`entity(person), time, property, value, producer`
  - 不断的给人加上snapshot（利用各种渠道，评估，自测，App数据搜集，第三方数据导入。。。等等）
  - snapshot只加不删
  - property的定义：
      - 时效性属性（validation period），比如是长期的（如 性别，貌似也不一定啊。。。，出生日期，等），短期的如疾病状况（比如说感冒，可以若干天有效，长期无意义），即时的（比如心率之类的）
      - 类别属性（比如说属于身体构造类、疾病类。。。等等分类，考虑吸收国际标准化的定义，WHOFIC？）
      - 值类型属性（数值连续型，离散型即分类选项，可否存在组合选择等等）
  - value的取值和normalize应该由property的meta定义好
  - producer用来表明数据来源
  - snapshot是 自然人档案 存储的最小单位

### view
  - 应该定义某一方面的数据组合逻辑，比如有个view称作：自然人的精神状况
  - 应该可以有一组输入参数，比如 自然人的精神状况，输入可以是自然人的id
  - 输出是结构化的一个table
  - 应该对应一个数据分析脚本逻辑

### report
  - 定义一组view
  - 由view组合成具有业务价值的数据报表

### action
  - 是个宽泛概念
  - 能够产生snapshot的，都是action
  - 比如，自测，可以是action
  - 比如，评估，可以是action
  - 比如，穿戴设备数据导入，可以是action（比如导入心率snapshot）
  - 比如，用户app使用数据，可以是action（比如导入地理位置snapshot）
  - 比如，第三方数据对接，可以是action（比如导入住院历史snapshot）
  - 比如，task，也可以是action（比如接下来要进行一组随访）
  - 比如，推送，也可以是action
  - action可以是被动触发，也可以是主动触发

### trigger
  - 本质上，定义的是一个规则
  - 由三元组构成 `<view, state, action>`

## 场景

### 患者生命周期维护
  - 举个例子：患者首次通过某科室二维码进入系统，可以产生一些snapshots, 此时有个trigger, 发现满足条件，然后就自动触发了一个action，给患者生成了一组相应的自测
  - 接下来，在不同的生命周期阶段，可以用不同的trigger来完成对患者的持续跟踪维护
  - 比如，持续产生推送宣教和自测的action，用户通过完成宣教或自测，产生新的snapshot，用以影响接下来可能会发生什么trigger（比如可能再推某服务）
  - 通过完善内容，很多患者的基本需求可以被自动的trigger-action覆盖
### 护士生命周期维护
  -
### 自测与评估
  - 自测与评估，可理解为一个采集snapshot的过程
  - 可能会利用某些已有的snapshot，比如年龄，疾病史
  - 会产生一系列新的snapshot
### 内容管理（详见CMS二期设计文档）
  - snapshot可以与文章标签存在关联
### 服务设计
  - 内容研发通过可以通过具体需要的服务
### 科研场景
  - 比如随访类型，通过App完成患者分组对照试验
  - 完成后，直接导出report即可
### 外部数据对接
  - 导入：完善snapshot
  - 导出：通过report
### 触发器设计、编辑
  - 考虑什么状态需要触发什么

## 注意点
  - 需要和评估系统协同（定义property)
  - report应该可以单独存储，作为一个可以重复使用的数据报表
  - 不一定需要要求report的数据即时性，比如data job可能每天跑一次，那么数据即时性应该是天


## 长效性属性（from Lucy）

一般资料

* 姓名
* 性别
* 年龄
* 出生地
* 民族
* 婚姻状况
* 文化程度
* 职业
* 宗教信仰
* 通讯地址
* 电话
* 联系方式
* 紧急联系人及联系方式

健康情况
* 已确诊的疾病
* 外伤史
* 手术史
* 月经史（女）
* 生育史（女）
* 过敏史
* 烟酒嗜好

家族史
